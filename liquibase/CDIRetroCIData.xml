<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <!--Add change tags here-->
    <!-- Data specific to CDIRetroCI -->    
  
    <changeSet author="pahill" id="1" context="CDIRetroCI">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'ARVEd';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert clinlims demographic ARV answers to question: Education Level</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('ARVEd', 'ARV Demographic Education Level', nextval('dictionary_category_seq'));
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NoSchool', 'education.noSchool', 'No Schooling',  nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry,  id, dictionary_category_id )
	    		VALUES             ('Y', 'Primary', 'education.primary',  'Primary School', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry,  id, dictionary_category_id )
	    		VALUES             ('Y', 'Secondary', 'education.secondary',  'Secondary School', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry,  id, dictionary_category_id )
	    		VALUES             ('Y', 'PostSecond', 'education.postSecondary',  'College or University', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
		</sql>
    </changeSet>
    
    <changeSet author="pahill" id="2" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'ARVMarital';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to ARV demographic question: Marital Status</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('ARVMarital', 'ARV Demographic Marital Status',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'celibate', 'marital.single', 'Marital Status Single (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'married', 'marital.married', 'Martial Status Married (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    		insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'cohab', 'marital.cohabitating', 'Martial Status cohabiting (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    		insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'widow', 'marital.widow', 'Martial Status window(er) (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    		insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NA', 'marital.n_a', 'Martial Status N/A for children (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>

    <changeSet author="pahill" id="3" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'RTNNation';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to RTN demographic question: Nationality</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('RTNNation', 'RTN Demographic Info: Nationality',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'CI', 'nationality.CI', 'Nationality Côte d''Ivoire (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'BJ', 'nationality.BJ', 'Nationality Benin (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'BF', 'nationality.BF', 'Nationality Burkino Faso (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'GH', 'nationality.GH', 'Nationality Ghana (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'GN', 'nationality.GN', 'Nationality Guinea (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'ML', 'nationality.ML', 'Nationality Mali (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'MR', 'nationality.MR', 'Nationality Maurintainia (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NE', 'nationality.NE', 'Nationality Niger (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'TG', 'nationality.TG', 'Nationality Togo (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'LR', 'nationality.LR', 'Nationality Liberia (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NG', 'nationality.NG', 'Nationality Nigeria (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'SN', 'nationality.SN', 'Nationality Senegal (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="4" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'YesNoUnkn';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to demographic question which have 3 possible answers: Yes, No and Unknown</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('YesNoUnkn', 'Demographic Yes, No, Unknown responses',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'Yes', 'answer.yes', 'Demographic Response Yes (in Yes, No or Unknown)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'No', 'answer.no', 'Demographic Response No (Yes, No or Unknown)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'Unknown', 'answer.unknown', 'Demographic Response Unknown (Yes, No or Unknown)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>

    <changeSet author="pahill" id="5" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'YesNoNA';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to demographic question which have 3 possible answers: Yes, No and NA (Not Applicable)</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('YesNoNA', 'Demographic Questions w/ 3 possible answers: Yes, No and NA',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'Yes', 'answer.yes', 'Demographic Response Yes (in Yes, No or N/A)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'No', 'answer.no', 'Demographic Response No (Yes, No or N/A)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NA', 'answer.notApplicable', 'Demographic Response N/A (Yes, No or N/A)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>

    <changeSet author="pahill" id="6" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'YesNo';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to demographic question which have 2 possible answers: Yes and No</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('YesNo', 'Demographic Questions w/ 2 possible answers: Yes and No',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'Yes', 'answer.yes', 'Demographic Response Yes (in Yes or No)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'No', 'answer.no', 'Demographic Response No (in Yes or No)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="7" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'ARVDisease';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to demographic question about disease</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('ARVDisease', 'ARV Demographic Questions about disease',  nextval('dictionary_category_seq'));
	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'TBPul', 'disease.tbPulmonary', 'Pulmonary TB : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));	    		   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'TBExpul', 'disease.tbExpulmonary', 'Expulmonary TB : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ( 'Y', 'CrblToxo', 'disease.cerebralToxoplamosis', 'Cerebral Toxoplamosis : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'CryptoMen', 'disease.cryoptococcalMeningitis', 'Cryoptococcal Meningitis : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'GenPrurigo', 'disease.generalPrurigo', 'General Prurigo : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'IST', 'disease.IST', 'IST (?) : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'CervCancer', 'disease.cervicalCancer', 'Cervical Cancer : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'OpharCand', 'disease.oropharyngealCandidiasis', 'Oropharyngeal Candidiasis : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'KaposiSarc', 'disease.KaposisSarcoma', 'Kaposi''s sarcoma : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'Shingles', 'disease.shingles', 'shingles : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq')); 
			insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
				VALUES  ('Y', 'DiarrheaC', 'disease.diarrhea', 'Chronic Diarrhea : Demographic Answer to ARV disease question', nextval('dictionary_seq'), currval('dictionary_category_seq')); 
    	</sql>
    </changeSet>
    <changeSet author="pahill" id="8" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'ARVProphyl';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to ARV demographic question: Precise type of Prophlaxis</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('ARVProphyl', 'ARV Prophylaxis Questions',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'PTME', 'prophylaxis.ptme', 'Preventing Mother to Child Transmission (AIDs Prophylaxis) FR: PTME', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AES', 'prophylaxis.AES', 'AES (FR) (AIDs Prophylaxis)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'NA', 'answer.unknown', 'Not applicable (AIDS Prophylaxis)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="9" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'AIDSStg';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to AID Stages question</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('AIDSStg', 'Aids Stages (CDC 1993)',  nextval('dictionary_category_seq'));
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgA-A', 'AIDSStage.adultA', 'AIDS Stage A (Adult)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgB-A', 'AIDSStage.adultB', 'AIDS Stage B (Adult)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgC-A', 'AIDSStage.adultC', 'AIDS Stage C (Adult)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgN-I', 'AIDSStage.infantN', 'AIDS Stage N (Infant)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgA-I', 'AIDSStage.infantA', 'AIDS Stage A (Infant)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgB-I', 'AIDSStage.infantB', 'AIDS Stage B (Infant)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES ('Y', 'AIDSStgC-I', 'AIDSStage.infantC', 'AIDS Stage C (Infant)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="10" context="CDIRetroCI" runOnChange="true">
               <comment>Removed and replaced with following change set, demographic history was renamed to observation history</comment>
    </changeSet>
    
    <changeSet author="paulsc" id="2" context="CDIRetroCI" runOnChange="false">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.observation_history_type where type_name = 'nationality';
    		</sqlCheck>
    	</preConditions>
    	<comment>
    	Observation history categories do not coorespond to dictionary categories for two reasons.
    	Two survey questions might record a DH value as the same type, but the set of choices for each survey might be different.
    	Two survey questions might use the same answers for different questions. The obvious examples there are two questions both of which use yes as choices which is 1 Dictionary type used as values for multiple demographic history entries.
    	Each demo history entry would be marked with a different type indicating the question answered.  
    	</comment>
	    <sql>
    	INSERT INTO clinlims.observation_history_type (type_name, description, id) VALUES
    		( 'educationLevel', 'Education Level', nextval('observation_history_type_seq'));
    	INSERT INTO clinlims.observation_history_type (type_name, description, id) VALUES
    		( 'maritalStatus', 'Marital Status', nextval('observation_history_type_seq'));
    	INSERT INTO clinlims.observation_history_type (type_name, description, id) VALUES
    		( 'nationality', 'Nationality', nextval('observation_history_type_seq'));
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="11" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'ARVNation';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert answers to RTN demographic question: Nationality</comment>
    	<sql>
	    	insert into clinlims.dictionary_category (local_abbrev,description,id) values ('ARVNation', 'ARV Demographic Info: Nationality',  nextval('dictionary_category_seq'));
	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'CI', 'nationality.CI', 'Nationality Côte d''Ivoire (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'BJ', 'nationality.BJ', 'Nationality Benin (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'BF', 'nationality.BF', 'Nationality Burkino Faso (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'GH', 'nationality.GH', 'Nationality Ghana (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'GN', 'nationality.GN', 'Nationality Guinea (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'ML', 'nationality.ML', 'Nationality Mali (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'MR', 'nationality.MR', 'Nationality Maurintainia (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NE', 'nationality.NE', 'Nationality Niger (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'TG', 'nationality.TG', 'Nationality Togo (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'LR', 'nationality.LR', 'Nationality Liberia (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'NG', 'nationality.NG', 'Nationality Nigeria (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into clinlims.dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'SN', 'nationality.SN', 'Nationality Senegal (for ARV)', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="12" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from observation_history_type where type_name = 'legalResidence';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert observation_history_type type legal residence</comment>
    	<sql>
        	INSERT INTO observation_history_type (type_name, description, id) VALUES
    		( 'legalResidence', 'Legal Residence', nextval('observation_history_type_seq'));
    	</sql>
    </changeSet>
    
    <changeSet author="pahill" id="13" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from dictionary_category where local_abbrev = 'HIVStatus';
    		</sqlCheck>
    	</preConditions>
    	<comment>Insert demographic type HIV Status</comment>
    	<sql>
	    	insert into dictionary_category (local_abbrev,description,id) values ('HIVStatus', 'ARV Demographic Question HIV Status',  nextval('dictionary_category_seq'));
	    	
	    	insert into dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'HIV-1', 'HIVStatus.HIV_1', 'HIV Status HIV-1 infection', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'HIV-2', 'HIVStatus.HIV_2', 'HIV Status HIV-2 infection', nextval('dictionary_seq'), currval('dictionary_category_seq'));   	    	
	    	insert into dictionary (is_active, local_abbrev,  display_key, dict_entry, id, dictionary_category_id )
	    		VALUES             ('Y', 'HIVDual', 'HIVStatus.HIVDual', 'HIV Status HIV-1 and HIV-2', nextval('dictionary_seq'), currval('dictionary_category_seq'));
    	</sql>
    </changeSet>
    
    <changeSet author="pauls" id="1" context="CDIRetroCI" runOnChange="true">
               <comment>Setting Status for RetroCI</comment>
               <delete schemaName="clinlims" tableName="status_of_sample"/>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="SAMPLE"/>
                       <column name="name" value="Test Entered"/>
                       <column name="description" value="No tests have been run for this sample"/>
                       <column name="display_key" value="status.sample.notStarted"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="SAMPLE"/>
                       <column name="name" value="Testing Started"/>
                       <column name="description" value="Some tests have been run on this sample"/>
                       <column name="display_key" value="status.sample.started"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="SAMPLE"/>
                       <column name="name" value="Testing finished"/>
                       <column name="description" value="All tests have been run on this sample"/>
                       <column name="display_key" value="status.sample.finished"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="SAMPLE"/>
                       <column name="name" value="Non-conforming"/>
                       <column name="description" value="The sample is non-conforming"/>
                       <column name="display_key" value="status.sample.nonConforming"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="Not Tested"/>
                       <column name="description" value="This test has not yet been done"/>
                       <column name="display_key" value="status.test.notStarted"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="Test Canceled"/>
                       <column name="description" value="Test was requested but then canceled"/>
                       <column name="display_key" value="status.test.canceled"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="Technical Acceptance"/>
                       <column name="description" value="The test was accepted as being valid"/>
                       <column name="display_key" value="status.test.tech.accepted"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="Technical Rejected"/>
                       <column name="description" value="The results of the test were not accepted by the technicain"/>
                       <column name="display_key" value="status.test.tech.rejected"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="Biologist Rejection"/>
                       <column name="description" value="The Biologist did not accept this result as valid"/>
                       <column name="display_key" value="status.test.biologist.reject"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="Valid"/>
                       <column name="description" value="The test has passed all validation and has been accepted as valid"/>
                       <column name="display_key" value="status.test.valid"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="RECORD"/>
                       <column name="name" value="Not Started"/>
                       <column name="description" value="The data entry has not yet started"/>
                       <column name="display_key" value="status.record.notStarted"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="RECORD"/>
                       <column name="name" value="Initial Entry"/>
                       <column name="description" value="The initial entry has been done"/>
                       <column name="display_key" value="status.record.initialEntry"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="RECORD"/>
                       <column name="name" value="Validation Entry"/>
                       <column name="description" value="The second, validation, entry has been done"/>
                       <column name="display_key" value="status.record.validationEntry"/>
               </insert>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="RECORD"/>
                       <column name="name" value="Under Investigation"/>
                       <column name="description" value="There is reason to suspect that the form was not filled out correctly"/>
                       <column name="display_key" value="status.record.underInvestigation"/>
               </insert>
    </changeSet>
    <changeSet author="pahill" id="14" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
  			<sqlCheck expectedResult="0">
  				select count(*) from dictionary_category where local_abbrev = 'arvProph2'
  			</sqlCheck>
    	</preConditions>
    	<insert schemaName="clinlims" tableName="dictionary_category">
    		<column name="id" 	valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
    		<column name="name" value="Secondary Prophylaxis"/>
    		<column name="description" value="Secondary ARV Prophlaxis choices for ARV studies."/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="arvProph2"/> 
    	</insert>
    	
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="flucona"/>
    		<column name="dict_entry" value="Fluconazole"/>
    		<column name="display_key" value="arvProphyl.fluconazole"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"  />
    		<column name="local_abbrev" value="dalPyrFolA"   />
    		<column name="dict_entry" value="Dalacine® (clindamycine) + pyrimethamine + folinic acid"/>
    		<column name="display_key" value="arvProphyl.dalacinePyrimethamineFolinicAcid"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"  />
    		<column name="local_abbrev" value="adiPyrFolA"   />
    		<column name="dict_entry" value="Adiazine® (Sulfadiazine) + pyrimethamine + folinic acid"/>
    		<column name="display_key" value="arvProphyl.adiazinePyrimethamineFolinicAcid"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"  />
    		<column name="local_abbrev" value="anphoterB"   />
    		<column name="dict_entry"  value="Anphotericine B" />
    		<column name="display_key" value="arvProphyl.anphotericineB"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"  />
    		<column name="local_abbrev" value="cotrimoxaz"/>
    		<column name="dict_entry" value="Cotrimoxazole"/>
    		<column name="display_key" value="arcProphyl.cotrimoxazole"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"  />
    		<column name="local_abbrev" value="na"   />
    		<column name="dict_entry" value="N/A"/>
    		<column name="display_key" value="answer.notApplicable"/>
    	</insert>
    </changeSet>
    
   	<include file="RetroCITests.xml"/>

    <changeSet author="paulsc" id="3" context="CDIRetroCI" runOnChange="true">
    <preConditions onFail="MARK_RAN">
    <sqlCheck expectedResult="0">
              SELECT count( * )  FROM clinlims.system_user where login_name = 'analyzer';
    </sqlCheck>
    </preConditions>
    <comment>Adds analyzer user to db if they do not exist</comment>
    <insert schemaName="clinlims" tableName="system_user">
            <column name="id" valueNumeric=" nextval( 'system_user_seq' ) "/>
            <column name="login_name" value="analyzer"/>
            <column name="first_name" value="analyzer"/>
            <column name="last_name" value="service"/>
            <column name="initials" value="AS"/>
            <column name="is_active" value="Y"/>
            <column name="is_employee" value="Y"/>
            <column name="lastupdated" valueDate=" now() "/>
    </insert>
    <insert schemaName="clinlims" tableName="login_user">
            <column name="id" valueNumeric=" nextval( 'login_user_seq' ) "/>
            <column name="login_name" value="analyzer"/>
            <column name="password" value="u1AXh5zmcldvxFzjLzswpg=="/>
            <column name="password_expired_dt" valueDate=" current_date + interval '10 year' "/>
            <column name="account_locked" value="Y"/>
            <column name="account_disabled" value="N"/>
            <column name="is_admin" value="N"/>
            <column name="user_time_out" value="1"/>
    </insert>
    </changeSet>
    
    <changeSet author="paulsc" id="4" context="CDIRetroCI">
               <comment>drop and repopulates analyzer table unconditionally</comment>
               <delete schemaName="clinlims" tableName="analyzer_results"/>
               
               <delete schemaName="clinlims" tableName="analyzer_test_map"/>
               <delete schemaName="clinlims" tableName="analyzer"/>

               <insert schemaName="clinlims" tableName="analyzer">
                       <column name="id" valueNumeric=" nextval( 'analyzer_seq' ) "/>
                       <column name="name" value="Cobas Integra"/>
                       <column name="description" value="Cobas Integra 400"/>
                       <column name="is_active" valueBoolean="true"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer">
                       <column name="id" valueNumeric=" nextval( 'analyzer_seq' ) "/>
                       <column name="name" value="Sysmex XT 2000"/>
                       <column name="description" value="Sysmex XT 2000"/>
                       <column name="is_active" valueBoolean="true"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer">
                       <column name="id" valueNumeric=" nextval( 'analyzer_seq' ) "/>
                       <column name="name" value="Facscalibur"/>
                       <column name="description" value="Facscalibur"/>
                       <column name="is_active" valueBoolean="true"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
    </changeSet>

    <changeSet author="paulsc" id="27" context="CDIRetroCI">
        <comment>Drops and adds analyzer test to openELIS tests mapping</comment>
        <sql>TRUNCATE analyzer_test_map;</sql>
        <loadData file="RetroCI_CSV/RetroCI_analyzer_tests.csv" schemaName="clinlims" tableName="analyzer_test_map">
             <column name="analyzer_id" header="analyzer_id" type="NUMERIC"/>
             <column name="test_name" header="test_name" type="STRING"/>
             <column name="test_id" header="test_id" type="NUMERIC"/>
       </loadData>
    </changeSet>
    
    <changeSet author="pahill" id="15" context="CDIRetroCI" runOnChange="true">
    	<comment>Generalizing some of the lists 1st used in CDI RetroCI studies for others to use.</comment>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="local_abbrev" value="Education"/>
	    	<column name="name" value="Education Level"/>
	    	<column name="description" value="Education Level Demographic Information"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='ARVEd'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="local_abbrev" value="National"/>
	    	<column name="name" value="Nationality"/>
	    	<column name="description" value="Nationality Demographic Information"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='ARVNation'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="local_abbrev" value="Marital"/>
	    	<column name="name" value="Marital Status"/>
	    	<column name="description" value="Marital Status Demographic Information"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='ARVMarital'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="name" value="Yes No Unknown"/>
	    	<column name="description" value="Yes No Unknown question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='YesNoUnkn'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="name" value="Yes No NA"/>
	    	<column name="description" value="Yes No N/A question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='YesNoNA'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="name" value="Yes No"/>
	    	<column name="description" value="Yes No question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='YesNo'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="name" value="AIDS Stages"/>
	    	<column name="description" value="AID Stages demographic question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='AIDSStg'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="local_abbrev" value="RegionNat"/>
	    	<column name="name" value="Regional Nationality"/>
	    	<column name="description" value="Simplified list of nationality demographic question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='RTNNation'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="name" value="HIV Status"/>
	    	<column name="description" value="possible HIV status for demographic question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='HIVStatus'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="name" value="ARV Prophylaxis"/>
	    	<column name="description" value="ARV Prophylaxis treatments for demographic question choices"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='ARVProphyl'</where>
	    </update>
	    <update tableName="dictionary_category" schemaName="clinlims">
	    	<column name="local_abbrev" value="ARVDisease"/>
	    	<column name="name" value="ARV Disease"/>
	    	<column name="description" value="ARV diseases for demographic question"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>local_abbrev='AVRDisease'</where>
	    </update>
    </changeSet>    
    
    
     <changeSet author="nixonl" id="3" context="CDIRetroCI" runOnChange="true">
               <comment>Drop and Insert Projects</comment>
               <delete schemaName="clinlims" tableName="project_organization"/>
               <delete schemaName="clinlims" tableName="project"/>
 
               <insert schemaName="clinlims" tableName="project">
                       <column name="id" valueNumeric=" nextval( 'project_seq' ) "/>
                       <column name="name" value="Indeteriminate Results"/>
                       <column name="description" value="Indeterminate Results"/>
                       <column name="program_code" value="LIND"/>
                       <column name="display_key" value="project.IndeterminateStudy.name"/> 
                       <column name="is_active" value="Y"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="project">
                       <column name="id" valueNumeric=" nextval( 'project_seq' ) "/>
                       <column name="name" value="Cell Sequencing"/>
                       <column name="description" value="Cell Sequencing"/>
                        <column name="program_code" value="LSEQ"/>
                        <column name="display_key" value="project.SequencingStudy.name"/> 
                       <column name="is_active" value="Y"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="project">
                       <column name="id" valueNumeric=" nextval( 'project_seq' ) "/>
                       <column name="name" value="Special Request"/>
                       <column name="description" value="Special Requests"/>
                       <column name="display_key" value="project.SpecialRequestStudy.name"/> 
                        <column name="program_code" value="LSPE"/>
                       <column name="is_active" value="Y"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
    </changeSet>
        
    <changeSet author="nixonl" id="4" context="CDIRetroCI" runOnChange="true">
               <comment>Add Record Status (Sample and Patient) as a type to ObservationHistoryType table</comment>  
 
               <insert schemaName="clinlims" tableName="observation_history_type">
                       <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
                       <column name="type_name" value="SampleRecordStatus"/>
                       <column name="description" value="Sample Record Status"/>                 
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="observation_history_type">
                       <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
                       <column name="type_name" value="PatientRecordStatus"/>
                       <column name="description" value="Patient Record Status"/>                 
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
              
    </changeSet>
    

    <changeSet author="paulsc" id="6" context="CDIRetroCI">
    <comment>Sets the app name in the site information database</comment>
    <delete schemaName="clinlims" tableName="site_information">
            <where>name = 'appName'</where>
    </delete>
    <insert schemaName="clinlims" tableName="site_information">
            <column name="id" valueNumeric=" nextval( 'site_information_seq' ) "/>
            <column name="name" value="appName"/>
            <column name="description" value="The name of the application."/>
            <column name="value" value="CDIOpenElis"/>
            <column name="lastupdated" valueDate=" now() "/>
    </insert>
    </changeSet>

	<include file="ARV Centers.xml"/>
	<include file="EID Study Organizations.xml"/>
	<include file="RTN Study Organizations.xml"/>
	<include file="RTN Hospital Organizations.xml"/>
	
    <changeSet author="pahill" id="17" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'NatSimple';
    		</sqlCheck>
    	</preConditions>
    	<comment>insert 'Simplified' nationality for demographic questions: here, our neighbors, other</comment>
    	<insert tableName="dictionary_category" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
    		<column name="local_abbrev" value="NatSimple"/>
    		<column name="name" value="Simplified Nationality"/>
    		<column name="description" value="Simplified Nationality Choices for demographic questions"/>
    		<column name="lastupdated" valueDate=" now() "/>
    	</insert>
    	<insert tableName="dictionary" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="lastupdated" valueDate=" now() "/>
    		<column name="is_active" value="Y"/>
    		<column name="local_abbrev" value="Ivorian"/>
    		<column name="dict_entry" value="Ivorian"/>
    		<column name="display_key" value="nationality.simple.CI"/>
    	</insert>
    	<insert tableName="dictionary" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="lastupdated" valueDate=" now() "/>
    		<column name="is_active" value="Y"/>
    		<column name="local_abbrev" value="W.African"/>
    		<column name="dict_entry" value="West African"/>
    		<column name="display_key" value="nationality.simple.WestAfrican"/>
    	</insert>
    	<insert tableName="dictionary" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="lastupdated" valueDate=" now() "/>
    		<column name="is_active" value="Y"/>
    		<column name="local_abbrev" value="African"/>
    		<column name="dict_entry" value="Other African"/>
    		<column name="display_key" value="nationality.simple.OtherAfrican"/>
    	</insert>
    	<insert tableName="dictionary" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="lastupdated" valueDate=" now() "/>
    		<column name="is_active" value="Y"/>
    		<column name="local_abbrev" value="Other"/>
    		<column name="dict_entry" value="Other"/>
    		<column name="display_key" value="nationality.simple.Other"/>
    	</insert>
    </changeSet>
	
	<changeSet author="nixonl" id="5" context="CDIRetroCI">
             <preConditions onFail="MARK_RAN">
                 <sqlCheck expectedResult="0">
                     select count(*) from clinlims.system_module sm where sm.name = 'SampleEntryByProject' ;
                 </sqlCheck>
             </preConditions>
             <comment>Adds the SampleEntryByProject module</comment>
             <insert schemaName="clinlims" tableName="system_module">
                     <column name="id" valueNumeric=" nextval( 'system_module_seq' ) "/>
                     <column name="name" value="SampleEntryByProject"/>
                     <column name="description" value="Sample-&gt;SampleEntryByProject"/>
                     <column name="has_select_flag" value="Y"/>
                     <column name="has_add_flag" value="Y"/>
                     <column name="has_update_flag" value="Y"/>
                     <column name="has_delete_flag" value="Y"/>
             </insert>
  	</changeSet>
  	
  	<changeSet author="nixonl" id="6" context="CDIRetroCI">
             <preConditions onFail="MARK_RAN">
                 <sqlCheck expectedResult="0">
                     select count(*) from clinlims.system_module sm where sm.name = 'PatientEntryByProject' ;
                 </sqlCheck>
             </preConditions>
             <comment>Adds the PatientEntryByProject module</comment>
             <insert schemaName="clinlims" tableName="system_module">
                     <column name="id" valueNumeric=" nextval( 'system_module_seq' ) "/>
                     <column name="name" value="PatientEntryByProject"/>
                     <column name="description" value="Patient-&gt;PatientEntryByProject"/>
                     <column name="has_select_flag" value="Y"/>
                     <column name="has_add_flag" value="Y"/>
                     <column name="has_update_flag" value="Y"/>
                     <column name="has_delete_flag" value="Y"/>
             </insert>
  	</changeSet>
  	<changeSet author="nixonl" id="7" context="CDIRetroCI">
             <preConditions onFail="MARK_RAN"  >
                 <sqlCheck expectedResult="0">
                     select count(*) from clinlims.organization where name = 'Retro-CI' ;
                 </sqlCheck>
             </preConditions>
             <comment>Inserts "Retro-CI" as organization</comment>
             <insert schemaName="clinlims" tableName="organization">
                <column name="id" valueNumeric=" nextval ( 'organization_seq' ) "/>
                <column name="name" value="Retro-CI"/>
                <column name="mls_sentinel_lab_flag" value="N"/>
        	</insert>
  	</changeSet>
  	<changeSet author="pahill" id="18" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
  			<sqlCheck expectedResult="0">
  				select count(*) from dictionary_category where local_abbrev = 'arvRegime'
  			</sqlCheck>
    	</preConditions>
    	<insert schemaName="clinlims" tableName="dictionary_category">
    		<column name="id" 	valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
    		<column name="name" value="ARV Treatment Regime"/>
    		<column name="description" value="ARV treatment regime choices for ARV studies."/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="arvRegime"/> 
    	</insert>
    	
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="line1"/>
    		<column name="dict_entry" value="1st Line"/>
    		<column name="display_key" value="arvRegime.firstLine"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="line2"/>
    		<column name="dict_entry" value="2nd Line"/>
    		<column name="display_key" value="arvRegime.secondLine"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="line3"/>
    		<column name="dict_entry" value="3rd Line"/>
    		<column name="display_key" value="arvRegime.thirdLine"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="NA"/>
    		<column name="dict_entry" value="Not Applicable"/>
    		<column name="display_key" value="answer.notApplicable"/>
    	</insert>
    </changeSet>  	
    
    <changeSet author="paulsc" id="7" context="CDIRetroCI">
       <comment>Drops all of the current roles and modules in preperation for adding them back in the next changeset</comment>
        <sql>
            TRUNCATE clinlims.system_role_module, clinlims.system_user_role, clinlims.system_role CASCADE;
            ALTER SEQUENCE clinlims.system_user_module_seq RESTART WITH 1;
            ALTER SEQUENCE clinlims.system_role_seq RESTART WITH 1;
       </sql>
       <modifyColumn schemaName="clinlims" tableName="system_role">
             <column name="description" type="varchar(60)"/>
             <column name="name" type="varchar(30)"/>
       </modifyColumn>
    </changeSet>
    <changeSet author="paulsc" id="8" context="CDIRetroCI">
       <comment>Adds modules and roles</comment>
       <loadData file="RetroCI_CSV/RetroCI_Roles.csv" schemaName="clinlims" tableName="system_role">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="name" header="name" type="STRING"/>
             <column name="description" header="description" type="STRING"/>
             <column name="is_grouping_role" header="is_grouping_role" type="BOOLEAN"/>
             <column name="grouping_parent" header="grouping_parent" type="NUMERIC"/>
             <column name="display_key" header="display_key" type="STRING"/>
       </loadData>
       <loadData file="RetroCI_CSV/RetroCI_Role_Module.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
     </changeSet>
	  
	  <!-- Enhancement to paulsc:8  -->
      <changeSet author="nixonl" id="9" context="CDIRetroCI" runOnChange="true">
      <preConditions onFail="MARK_RAN">
  			<sqlCheck expectedResult="0">
  				select count(*) from clinlims.system_role where display_key = 'role.patient.edit'
  			</sqlCheck>
    	</preConditions>
    	<comment>Changing SampleEdit system_role and system_role_module to SampleEditByProject</comment>	
	    <insert tableName="system_role" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_role_seq' ) "/>
             <column name="name" value="Patient Edit"/>
             <column name="description" value="Able to edit already entered patients"/>
             <column name="is_grouping_role" value="FALSE"/>
             <column name="grouping_parent" value="NULL"/>
             <column name="display_key" value="role.patient.edit"/>	
	    </insert>
	    <insert tableName="system_role_module" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_user_module_seq' ) "/>
             <column name="has_select" value="Y"/>
             <column name="has_add" value="Y"/>
             <column name="has_update" value="Y"/>
             <column name="has_delete" value="Y"/>
             <column name="system_role_id" valueNumeric=" currval( 'system_role_seq' ) "/>
             <column name="system_module_id" valueNumeric="  ( select id from system_module where name = 'PatientEditByProject:readwrite' ) "/>
	    </insert>
	    <insert tableName="system_role" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_role_seq' ) "/>
             <column name="name" value="Patient Search"/>
             <column name="description" value="Able to search and view -read-only already entered patients"/>
             <column name="is_grouping_role" value="FALSE"/>
             <column name="grouping_parent" value="NULL"/>
             <column name="display_key" value="role.patient.search"/>	
	    </insert>
	    <insert tableName="system_role_module" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_user_module_seq' ) "/>
             <column name="has_select" value="Y"/>
             <column name="has_add" value="Y"/>
             <column name="has_update" value="Y"/>
             <column name="has_delete" value="Y"/>
             <column name="system_role_id" valueNumeric=" currval( 'system_role_seq' ) "/>
             <column name="system_module_id" valueNumeric="  ( select id from system_module where name = 'PatientEditByProject:readonly' ) "/>
	    </insert>
		
	  </changeSet>
	  <!--  extends nixonl 9 and paulsc 8-->
      <changeSet author="paulsc" id="11" context="CDIRetroCI">
       <comment>Adds modules and roles</comment>
       <loadData file="RetroCI_CSV/RetroCI_Roles_Rev1.csv" schemaName="clinlims" tableName="system_role">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="name" header="name" type="STRING"/>
             <column name="description" header="description" type="STRING"/>
             <column name="is_grouping_role" header="is_grouping_role" type="BOOLEAN"/>
             <column name="grouping_parent" header="grouping_parent" type="NUMERIC"/>
             <column name="display_key" header="display_key" type="STRING"/>
       </loadData>
       <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev3.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
     </changeSet>
	  
     <changeSet author="pahill" id="19" context="CDIRetroCI" runOnChange="false">
     	<comment>Another change to one of the dictionary: add other to RTNNation</comment>
     	<insert tableName="dictionary" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" (select id from clinlims.dictionary_category where name = 'Nationality') "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="other"/>
    		<column name="dict_entry" value="another nationality"/>
    		<column name="display_key" value="nationality.Other"/>
    	</insert>
     </changeSet>

  	<include file="CI RTN Diseases.xml"/>  
  	
  	<!-- Enhancement to nixonl:3  -->
  	 <changeSet author="nixonl" id="10" context="CDIRetroCI" runOnChange="false">
               <comment>Fix typo of Indeterminate Results Project</comment>
  		<update tableName="project" schemaName="clinlims">
	    	<column name="name" value="Indeterminate Results"/>	
	    	<where>name='Indeteriminate Results'</where>
	    </update>
    </changeSet>
    
     <changeSet author="nixonl" id="11" context="CDIRetroCI" runOnChange="false">
               <comment>Fix typo of ARV Project program code</comment>
  		<update tableName="project" schemaName="clinlims">
	    	<column name="program_code" value="LART"/>	
	    	<where>program_code='LARV'</where>
	    </update>
    </changeSet>
  	
  		
      <!-- Enhancement to paulsc:8  -->
      <changeSet author="paulsc" id="9" context="CDIRetroCI">
      	<comment>Adds missed AnalyzerResults actions to analyzer roles</comment>
      	 <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev1.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
      </changeSet>
      

      <changeSet author="nixonl" id="12" context="CDIRetroCI" runOnChange="true">
         <comment>Add HIV Status as a type to ObservationHistoryType table</comment>  
 		 <insert schemaName="clinlims" tableName="observation_history_type">
 	        <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
            <column name="type_name" value="HIV Status"/>
            <column name="description" value="HIV Status"/>                 
            <column name="lastupdated" valueNumeric=" now() "/>
         </insert>
      </changeSet>
     <changeSet author="paulsc" id="10" context="CDIRetroCI">
     <preConditions onFail="MARK_RAN">
          <sqlCheck expectedResult="0">
              select count(*) from clinlims.site_information si where name='lab director';
          </sqlCheck>
     </preConditions>
     <comment>Adds lab director to the site information if they do not already exist</comment>
     <insert schemaName="clinlims" tableName="site_information">
            <column name="id" valueNumeric=" nextval( 'site_information_seq' ) "/>
            <column name="name" value="lab director"/>
            <column name="value" value="Dr. Christiane Adjé"/>
            <column name="description" value="Laboratory director"/>
            <column name="lastupdated" valueDate=" now() "/>
     </insert>
     </changeSet>
      <changeSet author="pahill" id="20" context="CDIRetroCI">
      	<comment>Change a few role names and adds a few missing Role to Module Mappings.</comment>
      	<update tableName="system_role" schemaName="clinlims">
      		<column name="name" value="Test Request Entry"/>
      	 	<where>name = 'Test Result Entry'</where>
      	</update>
      	<update tableName="system_role" schemaName="clinlims">
      		<column name="name" value="Demographics Edit"/>
      		<column name="display_key" value="role.demographics.edit"/>
      		<where>name = 'Patient Edit'</where>
      	</update>
      	<update tableName="system_role" schemaName="clinlims">
      	 	<column name="name" value="Demographics Search"/>
      	 	<column name="display_key" value="role.demographics.search"/>
      	 	<where>name = 'Patient Search'</where>
      	</update>
      	<delete tableName="system_role" schemaName="clinlims">
      	 	<where>name = 'Sample Reception'</where>
      	</delete>
      	<delete tableName = "system_module" schemaName="clinlims">
      		<where>name LIKE 'SampleEdit:%'</where>
      	</delete>
		<insert schemaName="clinlims" tableName="system_module">
	        <column name="id" valueNumeric=" nextval( 'system_module_seq' ) "/>
	        <column name="name" value="SampleEditByProject"/>
	        <column name="description" value="Sample-&gt;SampleEditByProject"/>
	        <column name="has_select_flag" value="Y"/>
	        <column name="has_add_flag" value="Y"/>
	        <column name="has_update_flag" value="Y"/>
	        <column name="has_delete_flag" value="Y"/>
        </insert>      	
		<insert schemaName="clinlims" tableName="system_module">
	        <column name="id" valueNumeric=" nextval( 'system_module_seq' ) "/>
	        <column name="name" value="PatientEditByProject"/>
	        <column name="description" value="Patient-&gt;PatientEditByProject"/>
	        <column name="has_select_flag" value="Y"/>
	        <column name="has_add_flag" value="Y"/>
	        <column name="has_update_flag" value="Y"/>
	        <column name="has_delete_flag" value="Y"/>
        </insert>      	
      	<loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev2.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
      	</loadData>
      </changeSet>
      <changeSet author="pahill" id="21" context="CDIRetroCI">
      	<comment>various demographic questions respones defined as Observation History Types</comment>
      	<loadData file="RetroCI_CSV/RetroCI_ObservationHistory.csv" schemaName="clinlims" tableName="observation_history_type">
      		<column name="id" header="id" type="NUMERIC"/>
            <column name="type_name" header="type_name" type="STRING"/>
            <column name="description" header="description" type="STRING"/>
            <column name="lastupdated" header="lastUpdated" type="DATE" defaultValueDate="now()"/>
      	</loadData>
      </changeSet>  	 
  
      <changeSet author="nixonl" id="14" context="CDIRetroCI" runOnChange="true">
	      	<preConditions onFail="MARK_RAN">
		          <sqlCheck expectedResult="0">
		              select count(*) from clinlims.observation_history_type where type_name='whichPCR';
		          </sqlCheck>
	     	</preConditions>
            <comment>Adding Test Request Observation History Type and Dictionary Entries</comment>  

            <insert schemaName="clinlims" tableName="observation_history_type">
                   <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
                   <column name="type_name" value="whichPCR"/>
                   <column name="description" value="Which PCR - 1st or 2nd Test"/>                 
                   <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="reasonForSecondPCRTest"/>
	               <column name="description" value="Reason for Second PCR Test"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
                        
            <insert tableName="dictionary_category" schemaName="clinlims">
		    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
		    		<column name="local_abbrev" value="whichPCR"/>
		    		<column name="name" value="EID Which PCR Test"/>
		    		<column name="description" value="EID Which PCR Test"/>
		    		<column name="lastupdated" valueDate=" now() "/>
    		</insert>   
    			     	
	     	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="firstPCR"/>
	    		<column name="dict_entry" value="First PCR"/>
	    		<column name="display_key" value="EID.firstPCR"/>
	        </insert>
	        
	        <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="secondPCR"/>
	    		<column name="dict_entry" value="Second PCR"/>
	    		<column name="display_key" value="EID.secondPCR"/>
	        </insert>
	        
	         <insert tableName="dictionary_category" schemaName="clinlims">
		    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
		    		<column name="local_abbrev" value="rsonPCRTst"/>
		    		<column name="name" value="Reason for Second PCR Test"/>
		    		<column name="description" value="Reason for Second PCR Test"/>
		    		<column name="lastupdated" valueDate=" now() "/>
    		</insert>   
    			     	
	     	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="confirmPCR"/>
	    		<column name="dict_entry" value="1 - PCR to confirm first Positive PCR test result"/>
	    		<column name="display_key" value="EID.confirmationPCR"/>
	        </insert>
	        
	        <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="sixWeekPCR"/>
	    		<column name="dict_entry" value="2 - PCR six weeks after stopping breastfeeding"/>
	    		<column name="display_key" value="EID.sixWeeksPCR"/>
	        </insert>
	        
	        <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="indeterPCR"/>
	    		<column name="dict_entry" value="3 - PCR after indeterminate result"/>
	    		<column name="display_key" value="EID.indeterminatePCR"/>
	        </insert>
	        
	        <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="nonAppPCR"/>
	    		<column name="dict_entry" value="7 - Not Applicable for First PCR Test"/>
	    		<column name="display_key" value="EID.nonApplicablePCR"/>
	        </insert>
	        
	        <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.firstTestName"/>
	               <column name="description" value="Indeterminate First Test Name"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.secondTestName"/>
	               <column name="description" value="Indeterminate Second Test Name"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.firstTestDate"/>
	               <column name="description" value="Indeterminate First Test Date"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.secondTestDate"/>
	               <column name="description" value="Indeterminate Second Test Date"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.firstTestResult"/>
	               <column name="description" value="Indeterminate First Test Result"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.secondTestResult"/>
	               <column name="description" value="Indeterminate Second Test Result"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
            
            <insert schemaName="clinlims" tableName="observation_history_type">
	               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
	               <column name="type_name" value="ind.siteFinalResult"/>
	               <column name="description" value="Indeterminate Site Final Result"/>                 
	               <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
              
    </changeSet>
         
         
         
    <changeSet author="nixonl" id="15" context="CDIRetroCI" runOnChange="true">
      	<preConditions onFail="MARK_RAN">
	          <sqlCheck expectedResult="0">
	              select count(*) from clinlims.observation_history_type where type_name='eidInfantPTME';
	          </sqlCheck>
     	</preConditions>
           <comment>Adding EID Patient Observation History Type and Dictionary Entries</comment>  

           <insert schemaName="clinlims" tableName="observation_history_type">
                  <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
                  <column name="type_name" value="eidInfantPTME"/>
                  <column name="description" value="Infant Benefit from PTME"/>                 
                  <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
           
           <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidTypeOfClinic"/>
               <column name="description" value="Type of Clinic"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
           
           <insert tableName="dictionary_category" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
	    		<column name="local_abbrev" value="typOfClinc"/>
	    		<column name="name" value="EID Type of Clinic"/>
	    		<column name="description" value="EID Type of Clinic"/>
	    		<column name="lastupdated" valueDate=" now() "/>
   			</insert>  
   		
   		  	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="vaccinatn"/>
	    		<column name="dict_entry" value="1 = Vaccination"/>
	    		<column name="display_key" value="EID.vaccination"/>
        	</insert>
           
            <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="pediatricn"/>
	    		<column name="dict_entry" value="2 = Pediatrician"/>
	    		<column name="display_key" value="EID.pediatrician"/>
        	</insert>
        	
        	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="dietitian"/>
	    		<column name="dict_entry" value="3 = Dietitian"/>
	    		<column name="display_key" value="EID.dietitian"/>
        	</insert>
        	
        	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="otherSpcfy"/>
	    		<column name="dict_entry" value="4 = Other(Specify)"/>
	    		<column name="display_key" value="EID.otherSpecify"/>
        	</insert>
           
           <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidHowInfantEating"/>
               <column name="description" value="How the infant is eating"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
           
           <insert tableName="dictionary_category" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
	    		<column name="local_abbrev" value="howEating"/>
	    		<column name="name" value="EID How Infant Eating"/>
	    		<column name="description" value="EID How Infant Eating"/>
	    		<column name="lastupdated" valueDate=" now() "/>
   			</insert>  

			<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="olyBrstFed"/>
	    		<column name="dict_entry" value="1 = Exclusivly Breastfeeding"/>
	    		<column name="display_key" value="EID.onlyBreastfeeding"/>
        	</insert>
        	
        	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="mixedFed"/>
	    		<column name="dict_entry" value="2 = Mixed Feeding"/>
	    		<column name="display_key" value="EID.mixedfeeding"/>
        	</insert>
        	
        	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="nvrBrstfd"/>
	    		<column name="dict_entry" value="3 = Never breastfed"/>
	    		<column name="display_key" value="EID.neverBreastfed"/>
        	</insert>
        	
        	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="Brstfedlt6"/>
	    		<column name="dict_entry" value="4 = Stopped breastfeeding Less than 6 weeks ago"/>
	    		<column name="display_key" value="EID.stoppedBreastfedless6weeks"/>
        	</insert>
        	
        	<insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="Brstfedmt6"/>
	    		<column name="dict_entry" value="5 = Stopped breastfeeding More than 6 weeks ago"/>
	    		<column name="display_key" value="EID.stoppedBreastfedmore6weeks"/>
        	</insert>
        	
           <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidInfantSymptomatic"/>
               <column name="description" value="Infant Experiencing Symptoms"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
           
           <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidMothersHIVStatus"/>
               <column name="description" value="Mother's HIV Status"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
                    
           <insert tableName="dictionary_category" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
	    		<column name="local_abbrev" value="momsStatus"/>
	    		<column name="name" value="Mother's HIV Status"/>
	    		<column name="description" value="Mother's HIV Status"/>
	    		<column name="lastupdated" valueDate=" now() "/>
   			</insert> 

   		  <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="eidHiv1"/>
	    		<column name="dict_entry" value="1 = HIV-1"/>
	    		<column name="display_key" value="EID.hiv1"/>
          </insert>
          
            <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="ediHiv2"/>
	    		<column name="dict_entry" value="2 = HIV-2"/>
	    		<column name="display_key" value="EID.hiv2"/>
          </insert>
          
            <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="eidHivd"/>
	    		<column name="dict_entry" value="D = HIV 1+2"/>
	    		<column name="display_key" value="EID.hivD"/>
          </insert>
          
          <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="hivpos"/>
	    		<column name="dict_entry" value="P = HIV-POS"/>
	    		<column name="display_key" value="EID.hivP"/>
          </insert>
          
           <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="inconclsve"/>
	    		<column name="dict_entry" value="9 = Inconclusive"/>
	    		<column name="display_key" value="EID.inconclusive"/>
          </insert>
        	           
          <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidMothersARV"/>
               <column name="description" value="Mother's ARV Treatment"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
          </insert>
           
			   		
   		  <insert tableName="dictionary_category" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
	    		<column name="local_abbrev" value="momsTrtmnt"/>
	    		<column name="name" value="Mother's ARV Treatment"/>
	    		<column name="description" value="Mother's ARV Treatment"/>
	    		<column name="lastupdated" valueDate=" now() "/>
   	      </insert> 
   	      
   	      <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="eidNVP"/>
	    		<column name="dict_entry" value="1 = NVP"/>
	    		<column name="display_key" value="EID.nvp"/>
          </insert>
          
          <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="eid.aztNvp"/>
	    		<column name="dict_entry" value="2 = AZT + NVP + 3TC"/>
	    		<column name="display_key" value="EID.aztNvp"/>
          </insert>
          
          <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="eid.haart"/>
	    		<column name="dict_entry" value="3 = HAART"/>
	    		<column name="display_key" value="EID.haart"/>
          </insert>
          
           <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="eid.none"/>
	    		<column name="dict_entry" value="4 = None"/>
	    		<column name="display_key" value="EID.none"/>
          </insert>
	
           
          <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidInfantsARV"/>
               <column name="description" value="Infant's ARV Prophylaxis"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
           
          <insert tableName="dictionary_category" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
	    		<column name="local_abbrev" value="infantARV"/>
	    		<column name="name" value="EID Infant's ARV Prophylaxis"/>
	    		<column name="description" value="EID Infant's ARV Prophylaxis"/>
	    		<column name="lastupdated" valueDate=" now() "/>
   		 </insert>  
   		 
   		  <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="infaztNVP"/>
	    		<column name="dict_entry" value="1 = AZT + NVP"/>
	    		<column name="display_key" value="EID.infantAztNvp"/>
          </insert>
          
           <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="nvpSingle"/>
	    		<column name="dict_entry" value="2 = NVP Single Dose"/>
	    		<column name="display_key" value="EID.nvpSingleDose"/>
          </insert>
           
          <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="infARVOthr"/>
	    		<column name="dict_entry" value="3 = Other"/>
	    		<column name="display_key" value="EID.infantARVOther"/>
          </insert>
          
          <insert tableName="dictionary" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
	    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
	    		<column name="is_active" value="Y"/>
	    		<column name="lastupdated" valueDate="now()"/>
	    		<column name="local_abbrev" value="infARVNone"/>
	    		<column name="dict_entry" value="4 = None"/>
	    		<column name="display_key" value="EID.infantARVNone"/>
          </insert>
                      
          <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="eidInfantCotrimoxazole"/>
               <column name="description" value="Infant Cotrimoxazole"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
           </insert>
                       
           <insert tableName="dictionary_category" schemaName="clinlims">
	    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
	    		<column name="local_abbrev" value="eidCotrim"/>
	    		<column name="name" value="EID Cotrimoxazole"/>
	    		<column name="description" value="EID Infant Cotrimoxazole"/>
	    		<column name="lastupdated" valueDate=" now() "/>
   		</insert>   
   			     	
        
   </changeSet>
    
    <changeSet author="nixonl" id="16" context="CDIRetroCI" runOnChange="true">
      	<preConditions onFail="MARK_RAN">
	          <sqlCheck expectedResult="0">
	              select count(*) from clinlims.observation_history_type where type_name='';
	          </sqlCheck>
     	</preConditions>
     	<update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indFirstTestName"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.firstTestName'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indSecondTestName"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.secondTestName'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indFirstTestDate"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.firstTestDate'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indSecondTestDate"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.secondTestDate'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indFirstTestResult"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.firstTestResult'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indSecondTestResult"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.secondTestResult'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="indSiteFinalResult"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='ind.siteFinalResult'</where>
	    </update>
	    <update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="eidHowChildFed"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>type_name='eidHowInfantEating'</where>
	    </update>
   </changeSet>
    
      <changeSet author="pahill" id="22" context="CDIRetroCI">
        <preConditions onFail="MARK_RAN">
	          <sqlCheck expectedResult="0">
	              select count(*) from clinlims.observation_history_type where type_name='cotrimoxazoleTreatAdvEffType';
	          </sqlCheck>
     	</preConditions>
      	<comment>more demographic questions respones defined as Observation History Types</comment>
      	<loadData file="RetroCI_CSV/RetroCI_ObservationHistory_2.csv" schemaName="clinlims" tableName="observation_history_type">
      		<column name="id" header="id" type="NUMERIC"/>
            <column name="type_name" header="type_name" type="STRING"/>
            <column name="description" header="description" type="STRING"/>
            <column name="lastupdated" header="lastUpdated" type="DATE" defaultValueDate="now()"/>
      	</loadData>
      </changeSet>
     
    <changeSet author="pahill" id="23" context="CDIRetroCI">
        <preConditions onFail="MARK_RAN">
	          <sqlCheck expectedResult="0">
	              select count(*) from clinlims.observation_history_type where type_name='projectFormName';
	          </sqlCheck>
     	</preConditions>
        <comment>an implicit observation = what form did the patient fill out?</comment>
        <insert schemaName="clinlims" tableName="observation_history_type">
            <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
            <column name="type_name" value="projectFormName"/>
            <column name="description" value="the name of the form (paper questions not JSP) which the patient used."/>                 
            <column name="lastupdated" valueNumeric=" now() "/>
        </insert>
    </changeSet>


    <changeSet author="pahill" id="24" context="CDIRetroCI">
        <preConditions onFail="MARK_RAN">
	          <sqlCheck expectedResult="0">
	              select count(0) from clinlims.dictionary where display_key = 'disease.diarrhea';    	    
	          </sqlCheck>
     	</preConditions>
     	<comment> clean up difference in disease lists to make sure all have the last one.</comment>
        <insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" ( select id from dictionary_category where local_abbrev = 'ARVDisease' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="DiarrheaC"/>
    		<column name="dict_entry" value="Chronic Diarrhea : Demographic Answer to ARV disease question"/>
    		<column name="display_key" value="disease.diarrhea"/>
    	</insert>     	
	</changeSet>
	
	<!--   correction on pahill:15 -->
    <changeSet author="pahill" id="26" context="CDIRetroCI">
     	<update tableName="observation_history_type" schemaName="clinlims">
	    	<column name="type_name" value="hivStatus"/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where>description='HIV Status'</where>
	    </update>
	</changeSet>    
    
    <!-- Enhancement to paulsc:8  -->
      <changeSet author="paulsc" id="12" context="CDIRetroCI">
      	<comment>Adds search modules to appropriate roles</comment>
      	 <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev4.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
      </changeSet>

      <changeSet author="pahill" id="27" context="CDIRetroCI">
     	<comment> one more missing field saved as a Obser. Hist. this time from RTN.</comment>
        <insert schemaName="clinlims" tableName="observation_history_type">
          <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
          <column name="type_name" value="reason"/>
          <column name="description" value="Reason that this sample/patient test request was created."/>                 
          <column name="lastupdated" valueNumeric=" now() "/>
        </insert>
     </changeSet>     
      <changeSet author="paulsc" id="13" context="CDIRetroCI">
      	<comment>Drops and reloads qa_events for RetorCI</comment>
      	<delete schemaName="clinlims" tableName="qa_event"/>
      	 <loadData file="RetroCI_CSV/RetroCI_QA_Events.csv" schemaName="clinlims" tableName="qa_event">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="name" header="name" type="STRING"/>
             <column name="description" header="description" type="STRING"/>
             <column name="lastupdated" header="lastupdated" type="DATE"/>
             <column name="display_key" header="display_key" type="STRING"/>
             <column name="is_holdable" header="is_holdable" type="STRING"/>
        </loadData>
        </changeSet>
      <!-- Enhancement to paulsc:8  -->
      <changeSet author="paulsc" id="14" context="CDIRetroCI">
      	<comment>Adds search modules to appropriate roles</comment>
      	 <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev5.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
      </changeSet>
      <changeSet author="pauls" id="15" context="CDIRetroCI" runOnChange="true">
               <comment>Adding analysis status of non-conforming</comment>
               <insert schemaName="clinlims" tableName="status_of_sample">
                       <column name="id" valueNumeric=" nextval( 'status_of_sample_seq' ) "/>
                       <column name="code" value="1"/>
                       <column name="lastupdated" valueDate='now()' />
                       <column name="status_type" value="ANALYSIS"/>
                       <column name="name" value="NonConforming"/>
                       <column name="description" value="Test is for a non-conforming sample-item"/>
                       <column name="display_key" value="status.analysis.nonconforming"/>
               </insert>
       </changeSet>
       <!-- extends nixonl 3 -->
       <changeSet author="paulsc" id="16" context="CDIRetroCI" runOnChange="true">
               <comment>Insert Project ARV followup project and copies organizations from ARV study</comment>
               <insert schemaName="clinlims" tableName="project">
                       <column name="id" valueNumeric=" nextval( 'project_seq' ) "/>
                       <column name="name" value="Antiretroviral Followup Study"/>
                       <column name="description" value="Antiretroviral Followup Study"/>
                       <column name="program_code" value="LART"/>
                       <column name="display_key" value="project.ARVFollowupStudy.name"/>
                       <column name="is_active" value="Y"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <sql>insert into clinlims.project_organization (project_id, org_id)
                    select (select p2.id from clinlims.project p2 where p2.name = 'Antiretroviral Followup Study'),
                    po2.org_id from clinlims.project_organization po2
                    where po2.project_id = (select p.id from clinlims.project p where p.name = 'Antiretroviral Study'); </sql>
       </changeSet>
       
       <changeSet author="paulsc" id="17" context="CDIRetroCI">
      	<comment>more demographic questions respones defined as Observation History Types</comment>
      	<loadData file="RetroCI_CSV/RetroCI_ObservationHistory_3.csv" schemaName="clinlims" tableName="observation_history_type">
      		<column name="id" header="id" type="NUMERIC"/>
            <column name="type_name" header="type_name" type="STRING"/>
            <column name="description" header="description" type="STRING"/>
            <column name="lastupdated" header="lastUpdated" type="DATE" defaultValueDate="now()"/>
      	</loadData>
      </changeSet>
      
      <changeSet author="paulsc" id="18" context="CDIRetroCI">
       <comment>Adds modules and roles for reports</comment>
       <update schemaName="clinlims" tableName="system_role_module">
               <column name="system_role_id" valueNumeric=" ( select id from clinlims.system_role where name='Report' ) "/>
               <where>system_role_id =  ( select id from clinlims.system_role where name='Reports Admin' )  </where>
       </update>
       <delete schemaName="clinlims" tableName="system_role">
               <where>name='Reports Admin'</where>
       </delete>
       <update schemaName="clinlims" tableName="system_role">
               <column name="name" value="Report Admin"/>
               <where>name='Reports'</where>
       </update>
       <loadData file="RetroCI_CSV/RetroCI_Roles_Rev2.csv" schemaName="clinlims" tableName="system_role">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="name" header="name" type="STRING"/>
             <column name="description" header="description" type="STRING"/>
             <column name="is_grouping_role" header="is_grouping_role" type="BOOLEAN"/>
             <column name="grouping_parent" header="grouping_parent" type="NUMERIC"/>
             <column name="display_key" header="display_key" type="STRING"/>
       </loadData>
       <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev6.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
     </changeSet>
	<changeSet author="nixonl" id="17" context="CDIRetroCI">
        <comment>Adding Special Request Reason list </comment>   
		<insert tableName="dictionary_category" schemaName="clinlims">
    		<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
    		<column name="local_abbrev" value="SpeclReasn"/>
    		<column name="name" value="Special Request Reason"/>
    		<column name="description" value="Special Request Reason"/>
    		<column name="lastupdated" valueDate=" now() "/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="retroCStaf"/>
    		<column name="dict_entry" value="Retro CI Staff"/>
    		<column name="display_key" value="special.request.reason.retroCIStaff"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="USEmbassy"/>
    		<column name="dict_entry" value="US Embassy"/>
    		<column name="display_key" value="special.request.reason.USEmbassy"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="extnlReqst"/>
    		<column name="dict_entry" value="External Request"/>
    		<column name="display_key" value="special.request.reason.externalRequest"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="ACONDA"/>
    		<column name="dict_entry" value="ACONDA Request"/>
    		<column name="display_key" value="special.request.reason.ACONDA"/>
    	</insert>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="EGPAF"/>
    		<column name="dict_entry" value="EGPAF Request"/>
    		<column name="display_key" value="special.request.reason.EGPAF"/>
    	</insert>
	</changeSet>
      <changeSet author="pahill" id="28" context="CDIRetroCI">
     	<comment> one more missing field saved as a Obser. Hist. -- for all forms.</comment>
        <insert schemaName="clinlims" tableName="observation_history_type">
          <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
          <column name="type_name" value="underInvestigationComment"/>
          <column name="description" value="Reason that this sample/patient is under investigation."/>                 
          <column name="lastupdated" valueNumeric=" now() "/>
        </insert>
     </changeSet>     
    <changeSet author="nixonl" id="18" context="CDIRetroCI">
        <comment>Adding Biological Validation Roles </comment>   
       <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev7.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
    </changeSet>
    <changeSet author="pahill" id="29" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary_category where local_abbrev = 'divorced';
    		</sqlCheck>
    	</preConditions>
    	<comment>Missing Marital Status - divorced</comment>
    	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="dictionary_category_id" valueNumeric=" (select id from clinlims.dictionary_category where local_abbrev='Marital' ) "/> 
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="divorced"/>
    		<column name="dict_entry" value="Marital Status Divorced"/>
    		<column name="display_key" value="marital.divorced"/>
    	</insert>
    </changeSet>
        
    <changeSet author="pahill" id="30" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			select count(*) from clinlims.dictionary where dict_entry='Not applicable (AIDS Prophylaxis)' AND
    			display_key='answer.not_applicable';
    		</sqlCheck>
    	</preConditions>
    	<comment>Missing Marital Status - divorced</comment>
	    <update tableName="dictionary" schemaName="clinlims">
	    	<column name="display_key" value="answer.notApplicable"/>
	    	<where>dict_entry='Not applicable (AIDS Prophylaxis)'</where>
	    </update>
	</changeSet>
	<changeSet author="pahill" id="31" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="0">
    			SELECT count(*) FROM clinlims.organization_type WHERE short_name LIKE 'EID%'
    		</sqlCheck>
    	</preConditions>
    	<comment>Rename of several Org Types to suggest EID association</comment>
	    <sql>
	    UPDATE clinlims.organization_type
	    	SET short_name = 'EID ' || short_name 
	    	WHERE short_name IN ( 'ACONDA-VS CI', 'EGPAF', 'ESTHER', 'ICAP' )
	    </sql> 
	</changeSet>
	<changeSet author="pahill" id="32" context="CDIRetroCI">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="2">
				SELECT count(*) FROM dictionary WHERE dictionary_category_id = ( SELECT id FROM dictionary_category WHERE name = 'EID How Infant Eating' )
					AND local_abbrev LIKE 'Brstfed%'
			</sqlCheck>
		</preConditions>
		<comment>Move a couple of dictionary options from dictionary_category.name = 'EID How Infant Eating' to dictionary_category.name = 'EID Stopped Breastfeeding'</comment>
		<insert tableName="dictionary_category" schemaName="clinlims">
			<column name="id" valueNumeric=" nextval( 'dictionary_category_seq' ) "/>
			<column name="name" value="EID Stopped Breastfeeding"/>
			<column name="description" value="Choices for when an infant stopped breastfeeding"/>
			<column name="local_abbrev" value="stopFeed"/>
			<column name="lastupdated" valueDate=" now() "/>
		</insert>
		<update tableName="dictionary" schemaName="clinlims">
			<column name="dictionary_category_id" valueNumeric=" currval( 'dictionary_category_seq' ) "/>
			<column name="lastupdated" valueDate=" now() "/>
			<where> dictionary_category_id = ( SELECT id FROM dictionary_category WHERE name = 'EID How Infant Eating' ) AND local_abbrev LIKE 'Brstfed%'</where>
		</update>
	</changeSet>
	<changeSet author="pahill" id="33" context="CDIRetroCI">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				SELECT count(*) FROM dictionary WHERE dictionary_category_id IN 
				( SELECT id FROM dictionary_category WHERE
					( local_abbrev = 'stopFeed'  AND display_key = 'answer.notApplicable' ) OR
					( local_abbrev = 'infantARV' AND display_key = 'answer.unknown' ) OR
					( local_abbrev = 'momsTrtmnt' AND display_key = 'answer.unknown' )
				)
			</sqlCheck>
		</preConditions>
		<comment>Add a couple of missing NA and unknowns</comment>
        <insert tableName="dictionary" schemaName="clinlims">
			 <column name="id"                     valueNumeric="nextval( 'dictionary_seq') " />
			 <column name="is_active"                    value="Y" />
			 <column name="dict_entry"                    value="Not Applicable" />
			 <column name="local_abbrev"                  value="NA" />
			 <column name="dictionary_category_id" valueNumeric=" ( SELECT id FROM dictionary_category WHERE local_abbrev = 'stopFeed' ) "/>
			 <column name="lastupdated"               valueDate=" NOW() " />
			 <column name="display_key"                   value="answer.notApplicable" />
		</insert>
        <insert tableName="dictionary" schemaName="clinlims">
			 <column name="id"                     valueNumeric=" nextval( 'dictionary_seq') " />
			 <column name="is_active"                     value="Y" />
			 <column name="dict_entry"                    value="Unknown" />
			 <column name="local_abbrev"                  value="Unknown" />
			 <column name="dictionary_category_id" valueNumeric=" ( SELECT id FROM dictionary_category WHERE local_abbrev = 'infantARV' ) "/>
			 <column name="lastupdated"               valueDate=" NOW() " />
			 <column name="display_key"                   value="answer.unknown" />
		</insert>
        <insert tableName="dictionary" schemaName="clinlims">
			 <column name="id"                     valueNumeric=" nextval( 'dictionary_seq') " />
			 <column name="is_active"                     value="Y" />
			 <column name="dict_entry"                    value="Unknown" />
			 <column name="local_abbrev"                  value="Unknown" />
			 <column name="dictionary_category_id" valueNumeric=" ( SELECT id FROM dictionary_category WHERE local_abbrev = 'momsTrtmnt' ) "/>
			 <column name="lastupdated"               valueDate=" NOW() " />
			 <column name="display_key"                   value="answer.unknown" />
		</insert>
	</changeSet>
    <changeSet author="pahill" id="34" context="CDIRetroCI" runOnChange="true">
	    <comment>Add a couple of missing answers to demographic questions.</comment>  
		<insert schemaName="clinlims" tableName="observation_history_type">
			<column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
			<column name="type_name" value="eidTypeOfClinicOther"/>
			<column name="description" value="text field for undefined clinic type"/>                 
			<column name="lastupdated" valueNumeric=" now() "/>
		</insert>
		<insert schemaName="clinlims" tableName="observation_history_type">
			<column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
			<column name="type_name" value="eidStoppedBreastfeeding"/>
			<column name="description" value="value for when the child stopped breastfeeding"/>                 
			<column name="lastupdated" valueNumeric=" now() "/>
		</insert>
	</changeSet>
	<changeSet author="pahill" id="35" context="CDIRetroCI" runOnChange="true">
    	<comment>Bug Fix: Make sure any old ARV-F samples entered on a ARV-F form point to the ARV-F project.</comment>
	    <update tableName="sample_projects" schemaName="clinlims">
	    	<column name="proj_id" valueNumeric=" ( select id from project where name = 'Antiretroviral Followup Study' ) "/>
	    	<column name="lastupdated" valueDate=" now() "/>
	    	<where> id IN ( SELECT DISTINCT sp.id from sample_projects sp, observation_history oh
				WHERE proj_id IN ( select id from project where name = 'Antiretroviral Study' )
				AND oh.sample_id = sp.samp_id
				AND oh.observation_history_type_id = ( select id from observation_history_type oht where oht.type_name = 'projectFormName' )
				AND oh.value = 'FollowUpARV_Id' )
			</where>
	    </update>
	</changeSet>
	<changeSet author="pahill" id="36" context="CDIRetroCI" runOnChange="false">
		<insert schemaName="clinlims" tableName="system_module">
			<column name="id" valueNumeric=" nextval( 'system_module_seq' ) "/>
			<column name="name" value="Access.sample.accessionNo.edit"/>
			<column name="description" value="Sample-&gt;SampleEntryByProject edit sample number"/>
			<column name="has_select_flag" value="Y"/>
			<column name="has_add_flag" value="Y"/>
			<column name="has_update_flag" value="Y"/>
			<column name="has_delete_flag" value="Y"/>
		</insert>
		<insert schemaName="clinlims" tableName="system_module">
			<column name="id" valueNumeric=" nextval( 'system_module_seq' ) "/>
			<column name="name" value="Access.patient.subjectNos.edit"/>
			<column name="description" value="Patient-&gt;PatientEntryByProject edit subject numbers"/>
			<column name="has_select_flag" value="Y"/>
			<column name="has_add_flag" value="Y"/>
			<column name="has_update_flag" value="Y"/>
			<column name="has_delete_flag" value="Y"/>
		</insert>
	    <insert tableName="system_role" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_role_seq' ) "/>
             <column name="name" value="Identifying Information Edit"/>
             <column name="description" value="Able to edit already entered patients and sample primary IDs"/>
             <column name="is_grouping_role" value="FALSE"/>
             <column name="grouping_parent" value="NULL"/>
             <column name="display_key" value="role.edit.identifiers"/>	
	    </insert>
	    <insert tableName="system_role_module" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_user_module_seq' ) "/>
             <column name="has_select" value="Y"/>
             <column name="has_add" value="Y"/>
             <column name="has_update" value="Y"/>
             <column name="has_delete" value="Y"/>
             <column name="system_role_id" valueNumeric=" currval( 'system_role_seq' ) "/>
             <column name="system_module_id" valueNumeric="  ( select id from system_module where name = 'Access.sample.accessionNo.edit' ) "/>
	    </insert>
	    <insert tableName="system_role_module" schemaName="clinlims">
	    	 <column name="id" valueNumeric=" nextval( 'system_user_module_seq' ) "/>
             <column name="has_select" value="Y"/>
             <column name="has_add" value="Y"/>
             <column name="has_update" value="Y"/>
             <column name="has_delete" value="Y"/>
             <column name="system_role_id" valueNumeric=" currval( 'system_role_seq' ) "/>
             <column name="system_module_id" valueNumeric="  ( select id from system_module where name = 'Access.patient.subjectNos.edit' ) "/>
	    </insert>
	</changeSet>
	<!-- changeSet author="pahill" id="37" "getting rid of extended accesion number table" moved to changeLogs.xml do not re-used ID, because some DBs have changelog entries for the old changeSet. -->
    <changeSet author="pahill" id="38" context="CDIRetroCI" runOnChange="true">
     	<preConditions onFail="MARK_RAN">
	        <sqlCheck expectedResult="0">
	            select count(*) from clinlims.observation_history_type where type_name='underInvestigation';
	        </sqlCheck>
    	</preConditions>
        <comment>Adding one Observation History Type for Under Investigation</comment>  
        <insert schemaName="clinlims" tableName="observation_history_type">
               <column name="id" valueNumeric=" nextval( 'observation_history_type_seq' ) "/>
               <column name="type_name" value="underInvestigation"/>
               <column name="description" value="indicates that this patient/sample combination is under investigation"/>                 
               <column name="lastupdated" valueNumeric=" now() "/>
        </insert>
    </changeSet>
    <changeSet author="pahill" id="39" context="CDIRetroCI" runOnChange="true">
    	<preConditions onFail="MARK_RAN">
    		<sqlCheck expectedResult="t">
    			select ( (select count(0) from clinlims.test_section where display_key IS NULL ) > 0)
    		</sqlCheck>
    	</preConditions>
    	<comment>Make sure all test sections have language resource names.</comment>
    	<sql>
    		update clinlims.test_section set display_key = 'testSection.' || name 
    	</sql>
	</changeSet>
	<changeSet author="pahill" id="40" context="CDIRetroCI" runOnChange="true">
		<comment>Makes sure the UNKNOWN patient is really empty.</comment>
		<!-- could not figure out how to use update element when I needed to update a record in one table, patient, based on values in another table -->
		
		<sql>
			UPDATE clinlims.patient SET external_id = NULL, national_id = NULL, birth_date = NULL, gender = NULL, lastupdated =  now() FROM clinlims.person AS per  WHERE per.last_name = 'UNKNOWN_' AND clinlims.patient.person_id = per.id;
		</sql>
	</changeSet>
	<changeSet author="paulsc" id="19" context="CDIRetroCI">
               <comment>Adds Evolis analyzer</comment>
               <modifyColumn schemaName="clinlims" tableName="analyzer_test_map">
                     <column name="analyzer_test_name" type="varchar(40)"/>
               </modifyColumn>
                <insert schemaName="clinlims" tableName="analyzer">
                       <column name="id" valueNumeric=" nextval( 'analyzer_seq' ) "/>
                       <column name="name" value="Evolis"/>
                       <column name="description" value="Evolis"/>
                       <column name="is_active" valueBoolean="true"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'Evolis') "/>
                       <column name="analyzer_test_name" value="DBehring Enzygnost HIV integral II"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'Integral' ) "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'Evolis') "/>
                       <column name="analyzer_test_name" value="DBehring Enzygnost HIV integral IIDBS"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'Integral' ) "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'Evolis') "/>
                       <column name="analyzer_test_name" value="Murex HIV 1_2"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'Murex' ) "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'Evolis') "/>
                       <column name="analyzer_test_name" value="Murex HIV 1_2 DBS"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'Murex' ) "/>
               </insert>
    </changeSet>
    <changeSet author="paulsc" id="20" context="CDIRetroCI">
               <comment>Adds missing rows to sample_project based on the observation history</comment>
               <sql>
 insert into clinlims.sample_projects (id, samp_id, proj_id, lastupdated )
 select distinct on (s.id) nextval('sample_proj_seq'), s.id,
 CASE
	WHEN oh.value = 'InitialARV_Id' then (select id from clinlims.project p where p.name = 'Antiretroviral Study')
	WHEN oh.value = 'FollowUpARV_Id' then (select id from clinlims.project p where p.name = 'Antiretroviral Followup Study')
	WHEN oh.value = 'EID_Id' then (select id from clinlims.project p where p.name = 'Early Infant Diagnosis for HIV Study')
	WHEN oh.value = 'RTN_Id' then (select id from clinlims.project p where p.name = 'Routine HIV Testing')
	WHEN oh.value = 'Indeterminate_Id' then (select id from clinlims.project p where p.name = 'Indeterminate Results')
	WHEN oh.value = 'Special_Request_Id' then (select id from clinlims.project p where p.name = 'Special Request')
 END,
 now()
  from clinlims.sample s
 join clinlims.observation_history oh on s.id = oh.sample_id
 where s.id not in ( select samp_id from clinlims.sample_projects ) and
 oh.observation_history_type_id = (select id from clinlims.observation_history_type where type_name = 'projectFormName');
               </sql>
    </changeSet>
<changeSet author="paulsc" id="21" context="CDIRetroCI">
               <comment>Adds Cobas Taqman analyzer</comment>
                <insert schemaName="clinlims" tableName="analyzer">
                       <column name="id" valueNumeric=" nextval( 'analyzer_seq' ) "/>
                       <column name="name" value="Cobas Taqman"/>
                       <column name="description" value="Cobas Taqman"/>
                       <column name="is_active" valueBoolean="true"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'Cobas Taqman') "/>
                       <column name="analyzer_test_name" value="HIV-HPS"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'Viral Load' ) "/>
               </insert>
    </changeSet>
    <changeSet author="paulsc" id="22" context="CDIRetroCI">
               <comment>Adds cobas_taqman module and assigns it to the  correct role</comment>
               <insert schemaName="clinlims" tableName="system_module">
                       <column name="id" valueNumeric="  nextval( 'system_module_seq' ) "/>
                       <column name="name" value="AnalyzerResults:cobas_taqman"/>
                       <column name="description" value="Results=&gt;Analyzer=&gt;cobas_taqman"/>
                       <column name="has_select_flag" value="Y"/>
                       <column name="has_add_flag" value="Y"/>
                       <column name="has_update_flag" value="Y"/>
                       <column name="has_delete_flag" value="Y"/>
               </insert>
               <insert schemaName="clinlims" tableName="system_role_module">
                       <column name="id" valueNumeric=" nextval( 'system_user_module_seq' ) "/>
                       <column name="has_select" value="Y"/>
                       <column name="has_add" value="Y"/>
                       <column name="has_update" value="Y"/>
                       <column name="has_delete" value="Y"/>
                       <column name="system_role_id" valueNumeric=" ( select id from clinlims.system_role where name = '') "/>
                       <column name="system_module_id" valueNumeric=" (select id from clinlims.system_module where name = 'AnalyzerResults:cobas_taqman' ) "/>
               </insert>
                <insert schemaName="clinlims" tableName="system_role_module">
                       <column name="id" valueNumeric=" nextval( 'system_user_module_seq' ) "/>
                       <column name="has_select" value="Y"/>
                       <column name="has_add" value="Y"/>
                       <column name="has_update" value="Y"/>
                       <column name="has_delete" value="Y"/>
                       <column name="system_role_id" valueNumeric=" ( select id from clinlims.system_role where name = 'Cobas Taqman user') "/>
                       <column name="system_module_id" valueNumeric=" (select id from clinlims.system_module where name = 'AnalyzerResults:cobas_taqman' ) "/>
               </insert>
    </changeSet>
	<changeSet author="pahill" id="41" context="CDIRetroCI">
       	<insert schemaName="clinlims" tableName="dictionary">
    		<column name="id" valueNumeric=" nextval( 'dictionary_seq' ) "/>
    		<column name="is_active" value="Y"/>
    		<column name="lastupdated" valueDate="now()"/>
    		<column name="local_abbrev" value="NotSpeced"/>
    		<column name="dict_entry" value="the paper form doesn't have any explicit answer."/>
    		<column name="display_key" value="answer.notSpecified"/>
    	</insert>
    </changeSet>
	<changeSet author="pahill" id="42" context="CDIRetroCI">
        <comment>Adds more explicit observation history questions for all of the lists of diseases.  From currentDisease value=TB or priorDisease value=pneumonia to exact questions "currTB" value = yes, no etc. to support saving various NO answers (not filled in, NA ... )</comment>
        <loadData file="RetroCI_CSV/RetroCI_ObservationHistory_4.csv" schemaName="clinlims" tableName="observation_history_type">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="type_name" header="type_name" type="STRING"/>
             <column name="description" header="description" type="STRING"/>
			 <column name="lastupdated" header="lastupdated" type="DATE" defaultValueDate="now()"/>
       </loadData>	
    </changeSet>
    <changeSet author="pahill" id="43" context="CDIRetroCI">
    	<comment>Move all current diseases value = disease (dict id) to CDisease value = Yes (Yes from the proper list)</comment>
    	<sql>
			UPDATE observation_history AS oh
			SET observation_history_type_id = (SELECT id FROM observation_history_type AS ohts WHERE ohts.type_name = 'C' || d2.local_abbrev),
			    value = (SELECT d1.id FROM dictionary AS d1, dictionary_category AS dc WHERE d1.local_abbrev = 'Yes' AND d1.dictionary_category_id = dc.id AND dc.local_abbrev = 'YesNo') 
			FROM observation_history_type AS oht, dictionary AS d2, sample_projects AS sp 
			WHERE observation_history_type_id = oht.id 
			  AND sp.proj_id IN (SELECT id FROM project WHERE program_code = 'LART')
			  AND oh.sample_id = sp.samp_id
              AND oh.sample_id = sp.samp_id
			  AND oht.type_name = 'currentDiseases' 
			  AND value_type = 'D' 
			  AND d2.id = to_number(value, '99999')    	
    	</sql>
    </changeSet>    
    <changeSet author="pahill" id="44" context="CDIRetroCI">
    	<comment>Move all ARV PRIOR diseases value = disease (dict id) to "PSomeDisease" value = Yes (Yes from proper list of Yes, No)</comment>
    	<sql>
			UPDATE observation_history AS oh
			SET observation_history_type_id = (SELECT id FROM observation_history_type AS ohts WHERE ohts.type_name = 'P' || d2.local_abbrev),
			    value = (SELECT d1.id FROM dictionary AS d1, dictionary_category AS dc
			    	WHERE d1.local_abbrev = 'Yes' AND d1.dictionary_category_id = dc.id AND dc.local_abbrev = 'YesNo') 
			FROM observation_history_type AS oht, dictionary AS d2, sample_projects AS sp  
			WHERE observation_history_type_id = oht.id 
			  AND oh.sample_id = sp.samp_id
			  AND sp.proj_id IN (SELECT id FROM project WHERE program_code = 'LART')
			  AND oht.type_name = 'priorDiseases' 
			  AND value_type = 'D' 
			  AND d2.id = to_number(value, '99999')
    	</sql>
    </changeSet> 
    <changeSet author="pahill" id="45" context="CDIRetroCI">
	    <comment>Move all RTN diseases from a list of diseases to one question response (OH) for each disease with the answer "yes"</comment>
	    <sql>
	       UPDATE observation_history AS oh
			SET observation_history_type_id = (SELECT id FROM observation_history_type AS ohts 
					WHERE ohts.type_name = d2.local_abbrev),
			    value = (SELECT d1.id FROM dictionary AS d1, dictionary_category AS dc
			    	WHERE d1.local_abbrev = 'Yes' AND d1.dictionary_category_id = dc.id AND dc.local_abbrev = 'YesNoNA')
			FROM observation_history_type AS oht, dictionary AS d2, dictionary_category as dc2
			WHERE observation_history_type_id = oht.id 
			  AND dc2.local_abbrev = 'RTNDisease' 
			  AND d2.dictionary_category_id = dc2.id
			  AND value_type = 'D' 
			  AND d2.id = to_number(oh.value, '99999')
	    </sql>
    </changeSet>
    <changeSet author="paulsc" id="23" context="CDIRetroCI" >
    	<comment>Move under investigation comments from observation history to note table</comment>
    	<sql>
    	insert into clinlims.note  (id, 
                            sys_user_id, 
                            note_type,
                            subject,
                            reference_table,  
                            lastupdated, 
                            reference_id, 
                            "text")

	 select nextval( 'note_seq' ), 
	          '1',
	          'I',
	          'UnderInvestigation',
	          (select id from clinlims.reference_tables where name = 'observation_history'), 
	          now(), 
	          ohn.id, 
	          oh.value  
	          from clinlims.observation_history oh 
	          join clinlims.observation_history ohn on  
			oh.sample_id = ohn.sample_id where
			oh.observation_history_type_id = ( select id from clinlims.observation_history_type where type_name = 'underInvestigationComment' ) and
			ohn.observation_history_type_id = ( select id from clinlims.observation_history_type where type_name = 'underInvestigation' );
    	</sql>
    	<delete schemaName="clinlims" tableName="observation_history" >
    		<where>observation_history_type_id = ( select id from clinlims.observation_history_type where type_name = 'underInvestigationComment' )</where>
    	</delete>
    	<delete schemaName="clinlims" tableName="observation_history_type">
    		<where>type_name = 'underInvestigationComment' </where>
    	</delete>
    </changeSet>
    <changeSet author="paulsc" id="24" context="CDIRetroCI">
    	<preConditions onFail="MARK_RAN" >
    		<sqlCheck expectedResult="0" >
    			Select count(*) from clinlims.system_module where name = 'ResultValidation'
    		</sqlCheck>
    	</preConditions>
    	<comment>Adding Missed Biological Validation Roles </comment>   
       	 <insert schemaName="clinlims" tableName="system_module" >
        		<column name="id" valueNumeric="  nextval( 'system_module_seq' ) " />
        		<column name="name" value="ResultValidation" />
        		<column name="description" value="save from resultValidation->x" />
		<column name="has_select_flag" value="Y" />
		<column name="has_add_flag" value="Y" />
		<column name="has_delete_flag" value="Y" />
		<column name="has_update_flag" value="Y" />       
        	</insert>
       <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev8.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
    </changeSet>
   <changeSet author="paulsc" id="26" context="CDIRetroCI">
   	<comment>Adds the FacsCanto analyzer</comment>
   	<insert schemaName="clinlims" tableName="analyzer">
                       <column name="id" valueNumeric=" nextval( 'analyzer_seq' ) "/>
                       <column name="name" value="FacsCanto"/>
                       <column name="description" value="FacsCanto"/>
                       <column name="is_active" valueBoolean="true"/>
                       <column name="lastupdated" valueNumeric=" now() "/>
            </insert>
   </changeSet>
   <changeSet author="paulsc" id="28" context="CDIRetroCI">
       <comment>Adds modules and roles for facsCanto analyzer</comment>
       <loadData file="RetroCI_CSV/RetroCI_Roles_Rev3.csv" schemaName="clinlims" tableName="system_role">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="name" header="name" type="STRING"/>
             <column name="description" header="description" type="STRING"/>
             <column name="is_grouping_role" header="is_grouping_role" type="BOOLEAN"/>
             <column name="grouping_parent" header="grouping_parent" type="NUMERIC"/>
             <column name="display_key" header="display_key" type="STRING"/>
       </loadData>
            <loadData file="RetroCI_CSV/RetroCI_Role_Module_Rev9.csv" schemaName="clinlims" tableName="system_role_module">
             <column name="id" header="id" type="NUMERIC"/>
             <column name="has_select" header="has_select" type="STRING"/>
             <column name="has_add" header="has_add" type="STRING"/>
             <column name="has_update" header="has_update" type="STRING"/>
             <column name="has_delete" header="has_delete" type="STRING"/>
             <column name="system_role_id" header="system_role_id" type="NUMERIC"/>
             <column name="system_module_id" header="system_module_id" type="NUMERIC"/>
       </loadData>
 </changeSet>      
 <changeSet author="paulsc" id="29" context="CDIRetroCI" >
 	<comment>Inactivates unused tests</comment>
 	<update schemaName="clinlims" tableName="test" >
 		<column name="name" value="NE#" />
 		<column name="local_abbrev" value="NE#" />
 		<column name="description" value="NE#" />
 		<where>
 			name = 'NO#'
 		</where>
 	</update>
 	<update schemaName="clinlims" tableName="test" >
 		<column name="is_active" value="N" />
 		<where>
 			name in ('NE#', 'MO#' ,'BA#' ,'LY#' ,'EO#') 
 		</where>
 	</update>
 </changeSet>
 <changeSet author="paulsc" id="30" context="CDIRetroCI" >
 	<comment>Deletes 'NE#', 'MO#' ,'BA#' ,'LY#' ,'EO#' from the analyzer table</comment>
 	<delete tableName="analyzer_results" schemaName="clinlims" >
 		<where>
 			test_name in ('NE#', 'MO#' ,'BA#' ,'LY#' ,'EO#')
 		</where>
 	</delete>
 </changeSet>
<changeSet author="paulsc" id="31" context="CDIRetroCI" >
	<comment>Sets the default for showing the invalid results icon to true</comment>
	<update schemaName="clinlims" tableName="site_information" >
		<column name="value" value="true" />
		<where>name = 'showValidationFailureIcon' </where>
	</update>
</changeSet>
<changeSet author="paulsc" id="32" context="CDIRetroCI">
               <comment>Adds FacsCanto analyzer test mapping</comment>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'FacsCanto') "/>
                       <column name="analyzer_test_name" value="CD3_PER"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'CD3 percentage count' ) "/>
               </insert>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'FacsCanto') "/>
                       <column name="analyzer_test_name" value="CD4_PER"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'CD4 percentage count' ) "/>
               </insert>
</changeSet>
<changeSet author="paulsc" id="34">
	<comment>delete constraint for following change set</comment>
	<delete tableName="sample_organization" schemaName="clinlims">
		<where>org_id = (select id from clinlims.organization where name = 'Laura' )</where>
	</delete>
</changeSet>
<changeSet author="paulsc" id="33">
	<comment>Removes junk from dictionary and organization table</comment>
	<delete tableName="dictionary" schemaName="clinlims">
		<where>dict_entry = 'yuyiyiy'</where>
	</delete>
	<delete tableName="organization_organization_type" schemaName="clinlims">
		<where>org_id = (select id from clinlims.organization where name = 'Laura' )</where>
	</delete>
	<delete tableName="organization" schemaName="clinlims">
		<where>name = 'Laura'</where>
	</delete>
</changeSet>
<changeSet author="paulsc" id="35" context="CDIRetroCI">
	<comment>Add NFS as panel</comment>
	<insert tableName="panel" schemaName="clinlims">
		<column name="id" valueNumeric=" nextval( 'panel_seq' ) " />
		<column name="name" value="NFS" />
		<column name="description" value="NFS" />
		<column name="lastupdated" valueDate=" now() " />				
	</insert>
</changeSet>
<changeSet author="paulsc" id="36" context="CDIRetroCI" >
	<comment>Spreads out the sort order of tests</comment>
	<update tableName="test" schemaName="clinlims">
		<column name="sort_order" valueNumeric="sort_order * 10" />
	</update>
</changeSet>
<changeSet author="paulsc" id="37" context="CDIRetroCI">
	<comment>Adds Bioline test</comment>
	<insert tableName="test" schemaName="clinlims">
		<column name="id" valueNumeric=" nextval( 'test_seq' ) " />
		<column name="description"  value="Bioline"/>
		<column name="is_active" value="Y" />
		<column name="is_reportable" value="N" />
		<column name="lastupdated" valueDate=" now() " />
		<column name="test_section_id" valueNumeric=" (select id from clinlims.test_section where name = 'Serology' ) " />	
		<column name="local_abbrev" value="Bioline" />
		<column name="sort_order" valueNumeric="45" />	
		<column name="name" value="Bioline" />	
		<column name="display_key" value="test.Bioline" />
	</insert>
	<sql>
	INSERT INTO clinlims.test_result (id, tst_rslt_type, value, lastupdated, test_id) VALUES ( nextval( 'test_result_seq' ) , 'D', 
       CAST( (select id from clinlims.dictionary where dict_entry ='HIV1' and dictionary_category_id = ( select id from clinlims.dictionary_category where name = 'HIVResult')) as varchar ),
       now() ,  ( select id from clinlims.test where description = 'Bioline' ) );
	INSERT INTO clinlims.test_result (id, tst_rslt_type, value, lastupdated, test_id) VALUES ( nextval( 'test_result_seq' ) , 'D', 
       CAST( (select id from clinlims.dictionary where dict_entry ='HIV2' and dictionary_category_id = ( select id from clinlims.dictionary_category where name = 'HIVResult')) as varchar ),
       now() ,  ( select id from clinlims.test where description = 'Bioline' ) );
	INSERT INTO clinlims.test_result (id, tst_rslt_type, value, lastupdated, test_id) VALUES ( nextval( 'test_result_seq' ) , 'D', 
       CAST( (select id from clinlims.dictionary where dict_entry ='HIVD' and dictionary_category_id = ( select id from clinlims.dictionary_category where name = 'HIVResult')) as varchar ),
       now() ,  ( select id from clinlims.test where description = 'Bioline' ) );
	INSERT INTO clinlims.test_result (id, tst_rslt_type, value, lastupdated, test_id) VALUES ( nextval( 'test_result_seq' ) , 'D', 
       CAST( (select id from clinlims.dictionary where dict_entry ='Negative' and dictionary_category_id = ( select id from clinlims.dictionary_category where name = 'HIVResult')) as varchar ),
       now() ,  ( select id from clinlims.test where description = 'Bioline' ) );
	INSERT INTO clinlims.test_result (id, tst_rslt_type, value, lastupdated, test_id) VALUES ( nextval( 'test_result_seq' ) , 'D', 
       CAST( (select id from clinlims.dictionary where dict_entry ='Indeterminate' and dictionary_category_id = ( select id from clinlims.dictionary_category where name = 'HIVResult')) as varchar ),
       now() ,  ( select id from clinlims.test where description = 'Bioline' ) );
	INSERT INTO clinlims.test_result (id, tst_rslt_type, value, lastupdated, test_id) VALUES ( nextval( 'test_result_seq' ) , 'D', 
       CAST( (select id from clinlims.dictionary where dict_entry ='Invalid' and dictionary_category_id = ( select id from clinlims.dictionary_category where name = 'HIVResult')) as varchar ),
       now() ,  ( select id from clinlims.test where description = 'Bioline' ) );	
	</sql>
	<insert tableName="analyte" schemaName="clinlims" >
		<column name="id" valueNumeric=" nextval( 'analyte_seq' ) " />
		<column name="name" value="Bioline Results" />
		<column name="is_active" value="Y" />
		<column name="lastupdated" valueDate=" now() " />		
	</insert>
	<insert tableName="test_analyte" schemaName="clinlims" >
		<column name="id" valueNumeric=" nextval( 'test_analyte_seq' ) " />		
		<column name="test_id" valueNumeric=" ( select id from clinlims.test where name = 'Bioline') " />
		<column name="analyte_id" valueNumeric=" ( select id from clinlims.analyte where name = 'Bioline Results' ) " />
		<column name="result_group" valueNumeric="14" />
		<column name="sort_order" valueNumeric="1" />	
		<column name="lastupdated" valueDate=" now() " />	
	</insert>
	<insert tableName="sampletype_test" schemaName="clinlims">
		<column name="id" valueNumeric=" nextval( 'sample_type_test_seq' ) "/>
		<column name="sample_type_id" valueNumeric=" (select id from clinlims.type_of_sample where description = 'Dry Tube' ) " />
		<column name="test_id" valueNumeric=" (select id from clinlims.test where name = 'Bioline' ) " />
	</insert>
</changeSet>
<changeSet author="paulsc" id="38" context="CDIRetroCI">
               <comment>Adds extras Cobastaqman analyzer test mapping</comment>
               <insert schemaName="clinlims" tableName="analyzer_test_map">
                       <column name="analyzer_id" valueNumeric=" ( select id from clinlims.analyzer where name = 'Cobas Taqman') "/>
                       <column name="analyzer_test_name" value="HIVHP2"/>
                       <column name="test_id" valueNumeric=" (select id from clinlims.test where description = 'Viral Load' ) "/>
               </insert>
</changeSet>
</databaseChangeLog>
	